<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Профиль</title>
</head>

<head th:insert="blocks/head :: head"></head>

<body id="page-top">
<div id="wrapper">
    <nav th:insert="blocks/nav :: nav"
         class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0 accent">
    </nav>
    <div class="d-flex flex-column" id="content-wrapper">
        <div id="content">
            <div th:insert="blocks/navSecond :: navSecond"></div>
            <div class="container-fluid">
                <h3 class="text-dark mb-4">Профиль</h3>
                <div th:if="${message}" class="text-center" style="margin-top: 20px;">
                    <div class="alert alert-primary" role="alert">
                        <strong><span th:text="${message}"></span></strong>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-lg-4">
                        <div class="card mb-3">
                            <div class="card-body text-center shadow">
                                <img class="rounded-circle border mb-3 mt-4"
                                     th:src="'/img/' + ${avatar}"
                                     height="160" width="160">
                                <div class="mb-3">
                                    <form method="post" action="/profile/changeAvatar" enctype="multipart/form-data">
                                        <input class="form-control" type="file" name="avatar" accept="image/*"
                                               required>
                                        <button class="btn btn-primary mt-10px" type="submit">
                                            Изменить
                                        </button>
                                    </form>
                                </div>
                                <label class="form-label text-dark">
                                    <strong>*В имени картинки не должны содержаться пробелы</strong>
                                </label>
                            </div>
                        </div>
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="text-dark fw-bold m-0">Устройства</h6>
                            </div>
                            <div class="card-body">
                                <h4 class="small fw-bold">Всего устройств
                                    <span th:text="${allDevice}" class="float-end"></span>
                                </h4>
                                <h4 class="small fw-bold">Исправные
                                    <span th:text="${right}" class="float-end"></span>
                                </h4>
                                <h4 class="small fw-bold">Неисправные
                                    <span th:text="${allDevice - right}" class="float-end"></span>
                                </h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div class="row">
                            <div class="col">
                                <div class="card shadow mb-3">
                                    <div class="card-header py-3">
                                        <p class="text-dark m-0 fw-bold">Настройки профиля</p>
                                    </div>
                                    <div class="card-body">
                                        <form action="/profile/edit" method="post">
                                            <div class="row">
                                                <div class="col">
                                                    <div class="mb-3">
                                                        <label class="form-label text-dark" for="firstname">
                                                            <strong>Имя</strong>
                                                        </label>
                                                        <input class="form-control" type="text" id="firstname"
                                                               th:value="${user.firstname}" name="firstname"
                                                               required>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="mb-3">
                                                        <label class="form-label text-dark" for="lastname">
                                                            <strong>Фамилия</strong>
                                                        </label>
                                                        <input class="form-control" type="text" id="lastname"
                                                               th:value="${user.lastname}" name="lastname"
                                                               required>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <div class="mb-3">
                                                        <label class="form-label text-dark" for="passwordOld">
                                                            <strong>Текущий пароль</strong>
                                                            <br>
                                                        </label>
                                                        <input class="form-control" type="password" id="passwordOld"
                                                               name="passwordOld">
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="mb-3">
                                                        <label class="form-label text-dark" for="password">
                                                            <strong>Новый пароль</strong>
                                                            <br>
                                                        </label>
                                                        <input class="form-control" type="password" id="password"
                                                               name="password">
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="mb-3">
                                                        <label class="form-label text-dark" for="passwordRepeat">
                                                            <strong>Повторите новый пароль</strong>
                                                        </label>
                                                        <input class="form-control" type="password" id="passwordRepeat"
                                                               name="passwordRepeat">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <button class="btn btn-primary" type="submit">
                                                    Сохранить изменения
                                                </button>
                                            </div>
                                        </form>
                                        <label class="form-label text-dark" for="passwordRepeat">
                                            <strong>*Для изменения данных введите текущий пароль</strong>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer th:insert="blocks/footer :: footer"
                class="bg-white d-lg-flex justify-content-lg-center align-items-lg-center sticky-footer mxh-40px">
        </footer>
    </div>
</div>
<script src="/js/min.js"></script>
<script src="/js/theme.js"></script>
</body>

</html>